from telebot.types import Message
from utils.utils import get_transport_fact
from config_data.config import DEFAULT_COMMANDS
from loader import bot


@bot.message_handler(state=None)
def reply_to_text(message: Message) -> None:
    """
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –±–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
    –í –æ—Ç–≤–µ—Ç –Ω–∞ "–ü—Ä–∏–≤–µ—Ç" —Ç–∞–∫–∂–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è; –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö - –≤—ã–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º,
    —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –±–æ—Ç—É –Ω–µ –∑–Ω–∞–∫–æ–º–∞ –∏ —Å–æ–≤–µ—Ç—É–µ—Ç –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–ø—Ä–∞–≤–∫–µ, –∞ —Ç–∞–∫–∂–µ —Å–ª—É—á–∞–π–Ω—ã–π –∑–∞–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–∫—Ç –æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ.
    """
    if message.text.lower() == "–ø—Ä–∏–≤–µ—Ç":
        bot.send_message(
            chat_id=message.chat.id,
            text=f"–†–∞–¥ –≤–∏–¥–µ—Ç—å –≤–∞—Å, {message.from_user.first_name}!",
        )
        return

    elif message.text.startswith("/") and message.text not in DEFAULT_COMMANDS:
        random_fact = get_transport_fact()
        bot.send_message(
            chat_id=message.chat.id,
            text="–Ø –ø–æ–∫–∞ –Ω–µ –∑–Ω–∞—é —Ç–∞–∫—É—é –∫–æ–º–∞–Ω–¥—É üôÑ –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å –ø–æ–º–æ—â—å—é /help\n\n"
            f"–ß—Ç–æ–±—ã —Ä–µ–∞–±–∏–ª–∏—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –≤–∞—à–∏—Ö –≥–ª–∞–∑–∞—Ö, –ø—Ä–∏–≤–µ–¥—É –∑–∞–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–∫—Ç –æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ. –í—ã –∑–Ω–∞–ª–∏, —á—Ç–æ {random_fact}?",
        )
        return

    random_fact = get_transport_fact()
    bot.send_message(
        chat_id=message.chat.id,
        text="–Ø –ø–æ–∫–∞ –Ω–µ –æ–±—É—á–µ–Ω –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ü•≤ –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å –ø–æ–º–æ—â—å—é /help\n\n"
        f"–ß—Ç–æ–±—ã —Ä–µ–∞–±–∏–ª–∏—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –≤–∞—à–∏—Ö –≥–ª–∞–∑–∞—Ö, –ø—Ä–∏–≤–µ–¥—É –∑–∞–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–∫—Ç –æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ. –í—ã –∑–Ω–∞–ª–∏, —á—Ç–æ {random_fact}?",
    )
